<!DOCTYPE HTML>

<html>
  <head>

    <style>

      body {
        overflow: auto;
      }
      #theater {
        display: flex;
        flex-direction: column;
        width: min-content;
      }

      .expressionOperator {
        display: inline-bock;
        padding: 2px 4px;
        margin: 8px 0px;
        border-radius: 2px;
        background-color: #222;
        color: #fff;
        text-align: center;
      }

      .block {
        border : 1px solid #888;
        padding : 8px;
        margin: 8px;
  
      }

      .final {
        border : 2px solid #666;
        padding : 8px;
        margin: 8px;
        border-radius: 2px;
        width: max-content;
      }

      .finalTitle {
        position: relative; 
        top: -8px;
        left: -8px;
        border-radius: 0px 0px 2px 0px;
        background-color: #666;
        color: #fff;
        font-size: 16px;
        font-weight: bold;
        width: max-content;
        padding: 2px 8px;
      }

      .rule {
        border-left: 5px solid #888;
      }

      pre {
        white-space: pre-wrap;       /* Since CSS 2.1 */
      }

      .causal {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
      }

      .or {
        display: flex;
        flex-direction: column;
        border: 1px solid rgb(186, 124, 58);
        border-left: 5px solid rgb(186, 124, 58);
  
      }

      .orSymbol {
        background-color: rgb(186, 124, 58);
        text-align: center;
        color : #fff;
        position: relative;
        left: -8px;
      }

      .textAnnotation {
        font-family:'Courier New', Courier, monospace;
      }

      .annotation {
        background-color: #444488;
        color: #fff;
        max-width: max-content;
      }


      .annotationProbability {
        background-color: #AA8888;
        color: #fff;
        max-width: max-content;
      }

      .annotationDeontic {
        background-color: #8888AA;
        color: #fff;
        max-width: max-content;
      }
      .leadTo {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .r-list {
        display: flex;
        flex-direction: row;
      }

      .arrayProperty {
        display: flex;
        flex-direction: column;
        border-left: 2px solid #888;
        border-right: 2px solid #888;
        border-radius: 8px;
        margin-left: 10px;
        padding: 8px;
      }

      .fullWidth {
        width: max-content;
        display: flex;
        flex-direction: row;
      }

      .objProperty {
        width: min-content;
        padding : 8px;
        margin: 8px;
        border: 1px solid #888;
      }
      .arrItem {
        border : 1px solid #844;
        padding : 8px;
        margin: 8px;
      }

      .chain {
        border: 4px solid #444;
        margin:  8px;
        padding: 8px;
        padding-top: 16px;
        border-radius: 2px;
      }

      .title  {
        position: relative;
        top: -16px;
        left: -8px;
        padding: 4px;
        padding-left: 8px;
        color: #fff;
        font-size: 14px;
        width: fit-content;
        border-radius: 0px 0px 2px 0px;
        background-color: #444;
      }

      .variable {
        text-decoration: underline;
      }

      .any {
        font-size: 70px;
      }

      .causal {
        border: none;
      }

      .variable svg {
        display: inline-block;
        width: 16px;
        position: relative;
        top: 3px;
        fill: #444;
      }

      .annotation .variable svg {

        fill: #ddd;
      }
    </style>

  </head>


  <body>
    JSON:
    <textarea id="jsonIn">

      {
        "annotations": [],
        "chains": {
          "Main": {
            "type": "chain",
            "childrenType": "content",
            "children": [
              {
                "type": "any"
              }
            ],
            "annotations": [
              {
                "type": "annotation",
                "name": "Payout",
                "properties": {
                  "type": {
                    "type": "string",
                    "value": "Limit"
                  },
                  "amount": {
                    "type": "number",
                    "value": "20000000"
                  },
                  "unit": {
                    "type": "string",
                    "value": "USD"
                  }
                }
              }
            ]
          },
          "Cancellation": {
            "type": "chain",
            "childrenType": "content",
            "children": [
              {
                "type": "operation",
                "operator": "causal",
                "children": [
                  {
                    "type": "operation",
                    "operator": "or",
                    "children": [
                      {
                        "type": "operation",
                        "operator": "causal",
                        "children": [
                          {
                            "type": "operation",
                            "operator": "or",
                            "children": [
                              {
                                "type": "block",
                                "name": "Situation",
                                "properties": {
                                  "event": {
                                    "type": "expression",
                                    "operator": "or",
                                    "children": [
                                      {
                                        "type": "variable",
                                        "value": "Event.FinancialFailure",
                                        "class": "dictionaryValue",
                                        "info": {
                                          "dictionary": "Event",
                                          "key": "FinancialFailure",
                                          "value": {
                                            "type": "object",
                                            "properties": {
                                              "displayName": {
                                                "type": "string",
                                                "value": "financial failure"
                                              }
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "type": "variable",
                                        "value": "Event.Bankruptcy",
                                        "class": "dictionaryValue",
                                        "info": {
                                          "dictionary": "Event",
                                          "key": "Bankruptcy",
                                          "value": {
                                            "type": "object",
                                            "properties": {
                                              "displayName": {
                                                "type": "string",
                                                "value": "bankruptcy"
                                              }
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "type": "variable",
                                        "value": "Event.Liquidation",
                                        "class": "dictionaryValue",
                                        "info": {
                                          "dictionary": "Event",
                                          "key": "Liquidation",
                                          "value": {
                                            "type": "object",
                                            "properties": {
                                              "displayName": {
                                                "type": "string",
                                                "value": "liquidation"
                                              }
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "type": "variable",
                                        "value": "Event.Administration",
                                        "class": "dictionaryValue",
                                        "info": {
                                          "dictionary": "Event",
                                          "key": "Administration",
                                          "value": {
                                            "type": "object",
                                            "properties": {
                                              "displayName": {
                                                "type": "string",
                                                "value": "administration"
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ],
                                    "childrenType": "operand"
                                  },
                                  "relation": {
                                    "type": "object",
                                    "properties": {
                                      "type": {
                                        "type": "variable",
                                        "value": "Relation.HappenTo",
                                        "class": "dictionaryValue",
                                        "info": {
                                          "dictionary": "Relation",
                                          "key": "HappenTo",
                                          "value": {
                                            "type": "object",
                                            "properties": {
                                              "displayName": {
                                                "type": "string",
                                                "value": "Happened to"
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "target": {
                                        "type": "variable",
                                        "value": "BookedVenue",
                                        "class": "namedVariable",
                                        "info": {
                                          "type": "alias"
                                        }
                                      }
                                    }
                                  }
                                },
                                "annotations": [
                                  {
                                    "type": "annotation",
                                    "name": "Probability",
                                    "properties": {
                                      "p": {
                                        "type": "number",
                                        "value": "0.001"
                                      }
                                    }
                                  },
                                  {
                                    "type": "annotation",
                                    "name": "Text",
                                    "properties": {
                                      "value": {
                                        "type": "string",
                                        "value": "a) ceasing to trade due to financial failure, bankruptcy, liquidation or administration"
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "operation",
                                "operator": "causal",
                                "children": [
                                  {
                                    "type": "block",
                                    "name": "Situation",
                                    "properties": {
                                      "event": {
                                        "type": "expression",
                                        "operator": "or",
                                        "children": [
                                          {
                                            "type": "variable",
                                            "value": "Event.Fire",
                                            "class": "dictionaryValue",
                                            "info": {
                                              "dictionary": "Event",
                                              "key": "Fire",
                                              "value": {
                                                "type": "object",
                                                "properties": {
                                                  "displayName": {
                                                    "type": "string",
                                                    "value": "Fire"
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          {
                                            "type": "variable",
                                            "value": "Event.NaturalCatastrophe",
                                            "class": "dictionaryValue",
                                            "info": {
                                              "dictionary": "Event",
                                              "key": "NaturalCatastrophe",
                                              "value": {
                                                "type": "object",
                                                "properties": {
                                                  "displayName": {
                                                    "type": "string",
                                                    "value": "natural catastrophe"
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          {
                                            "type": "variable",
                                            "value": "Event.AdverseWeather",
                                            "class": "dictionaryValue",
                                            "info": {
                                              "dictionary": "Event",
                                              "key": "AdverseWeather",
                                              "value": {
                                                "type": "object",
                                                "properties": {
                                                  "displayName": {
                                                    "type": "string",
                                                    "value": "adverse weather"
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        ],
                                        "childrenType": "operand"
                                      }
                                    }
                                  },
                                  {
                                    "type": "block",
                                    "name": "Situation",
                                    "properties": {
                                      "event": {
                                        "type": "variable",
                                        "value": "Event.Damage",
                                        "class": "dictionaryValue",
                                        "info": {
                                          "dictionary": "Event",
                                          "key": "Damage",
                                          "value": {
                                            "type": "object",
                                            "properties": {
                                              "displayName": {
                                                "type": "string",
                                                "value": "Damage"
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "relation": {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "variable",
                                            "value": "Relation.HappenTo",
                                            "class": "dictionaryValue",
                                            "info": {
                                              "dictionary": "Relation",
                                              "key": "HappenTo",
                                              "value": {
                                                "type": "object",
                                                "properties": {
                                                  "displayName": {
                                                    "type": "string",
                                                    "value": "Happened to"
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          "target": {
                                            "type": "variable",
                                            "value": "BookedVenue",
                                            "class": "namedVariable",
                                            "info": {
                                              "type": "alias"
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "annotations": [
                                      {
                                        "type": "annotation",
                                        "name": "Probability",
                                        "properties": {
                                          "p": {
                                            "type": "number",
                                            "value": "0.0001"
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ],
                                "childrenType": "operand",
                                "annotations": [
                                  {
                                    "type": "annotation",
                                    "name": "Text",
                                    "properties": {
                                      "value": {
                                        "type": "string",
                                        "value": "b) damage to the venue caused by fire, natural catastrophe or adverse weather"
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "block",
                                "name": "Situation",
                                "properties": {
                                  "event": {
                                    "type": "expression",
                                    "operator": "or",
                                    "children": [
                                      {
                                        "type": "variable",
                                        "value": "Event.Murder",
                                        "class": "dictionaryValue",
                                        "info": {
                                          "dictionary": "Event",
                                          "key": "Murder",
                                          "value": {
                                            "type": "object",
                                            "properties": {
                                              "displayName": {
                                                "type": "string",
                                                "value": "Murder"
                                              }
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "type": "variable",
                                        "value": "Event.Death",
                                        "class": "dictionaryValue",
                                        "info": {
                                          "dictionary": "Event",
                                          "key": "Death",
                                          "value": {
                                            "type": "object",
                                            "properties": {
                                              "displayName": {
                                                "type": "string",
                                                "value": "Death"
                                              }
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "type": "variable",
                                        "value": "Event.Suicide",
                                        "class": "dictionaryValue",
                                        "info": {
                                          "dictionary": "Event",
                                          "key": "Suicide",
                                          "value": {
                                            "type": "object",
                                            "properties": {
                                              "displayName": {
                                                "type": "string",
                                                "value": "Suicide"
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ],
                                    "childrenType": "operand"
                                  },
                                  "relation": {
                                    "type": "object",
                                    "properties": {
                                      "type": {
                                        "type": "variable",
                                        "value": "Relation.HappenAt",
                                        "class": "dictionaryValue",
                                        "info": {
                                          "dictionary": "Relation",
                                          "key": "HappenAt",
                                          "value": {
                                            "type": "object",
                                            "properties": {
                                              "displayName": {
                                                "type": "string",
                                                "value": "Happened At"
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "target": {
                                        "type": "variable",
                                        "value": "BookedVenue",
                                        "class": "namedVariable",
                                        "info": {
                                          "type": "alias"
                                        }
                                      }
                                    }
                                  }
                                },
                                "annotations": [
                                  {
                                    "type": "annotation",
                                    "name": "Probability",
                                    "properties": {
                                      "p": {
                                        "type": "number",
                                        "value": "0.00001"
                                      }
                                    }
                                  },
                                  {
                                    "type": "annotation",
                                    "name": "Text",
                                    "properties": {
                                      "value": {
                                        "type": "string",
                                        "value": "c) murder, death or suicide at the venue"
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "block",
                                "name": "Situation",
                                "properties": {
                                  "event": {
                                    "type": "variable",
                                    "value": "Event.ActOfTerrorism",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Event",
                                      "key": "ActOfTerrorism",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Act of terrorism"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "relation": {
                                    "type": "object",
                                    "properties": {
                                      "type": {
                                        "type": "variable",
                                        "value": "Relation.HappenAt",
                                        "class": "dictionaryValue",
                                        "info": {
                                          "dictionary": "Relation",
                                          "key": "HappenAt",
                                          "value": {
                                            "type": "object",
                                            "properties": {
                                              "displayName": {
                                                "type": "string",
                                                "value": "Happened At"
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "target": {
                                        "type": "variable",
                                        "value": "BookedVenue",
                                        "class": "namedVariable",
                                        "info": {
                                          "type": "alias"
                                        }
                                      }
                                    }
                                  }
                                },
                                "annotations": [
                                  {
                                    "type": "annotation",
                                    "name": "Probability",
                                    "properties": {
                                      "p": {
                                        "type": "number",
                                        "value": "0.0000001"
                                      }
                                    }
                                  },
                                  {
                                    "type": "annotation",
                                    "name": "Text",
                                    "properties": {
                                      "value": {
                                        "type": "string",
                                        "value": "d) an act of terrorism at the venue"
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "block",
                                "name": "Situation",
                                "properties": {
                                  "event": {
                                    "type": "variable",
                                    "value": "Event.Closure",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Event",
                                      "key": "Closure",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Closure"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "relation": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "variable",
                                          "value": "Relation.HappenTo",
                                          "class": "dictionaryValue",
                                          "info": {
                                            "dictionary": "Relation",
                                            "key": "HappenTo",
                                            "value": {
                                              "type": "object",
                                              "properties": {
                                                "displayName": {
                                                  "type": "string",
                                                  "value": "Happened to"
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "target": {
                                          "type": "variable",
                                          "value": "BookedVenue",
                                          "class": "namedVariable",
                                          "info": {
                                            "type": "alias"
                                          }
                                        }
                                      }
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "variable",
                                          "value": "Relation.CausedBy",
                                          "class": "dictionaryValue",
                                          "info": {
                                            "dictionary": "Relation",
                                            "key": "CausedBy",
                                            "value": {
                                              "type": "object",
                                              "properties": {
                                                "displayName": {
                                                  "type": "string",
                                                  "value": "Caused by"
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "target": {
                                          "type": "string",
                                          "value": "relevant authority"
                                        }
                                      }
                                    }
                                  ]
                                },
                                "annotations": [
                                  {
                                    "type": "annotation",
                                    "name": "Probability",
                                    "properties": {
                                      "p": {
                                        "type": "number",
                                        "value": "0.0000001"
                                      }
                                    }
                                  },
                                  {
                                    "type": "annotation",
                                    "name": "Text",
                                    "properties": {
                                      "value": {
                                        "type": "string",
                                        "value": "  e) closure by a relevant authority;"
                                      }
                                    }
                                  }
                                ]
                              }
                            ],
                            "childrenType": "operand"
                          },
                          {
                            "type": "block",
                            "name": "Situation",
                            "properties": {
                              "event": {
                                "type": "variable",
                                "value": "Event.UnableToHoldGathering",
                                "class": "dictionaryValue",
                                "info": {
                                  "dictionary": "Event",
                                  "key": "UnableToHoldGathering",
                                  "value": {
                                    "type": "object",
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "value": "unable to hold gathering"
                                      }
                                    }
                                  }
                                }
                              },
                              "relation": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "type": {
                                      "type": "variable",
                                      "value": "Relation.By",
                                      "class": "dictionaryValue",
                                      "info": {
                                        "dictionary": "Relation",
                                        "key": "By",
                                        "value": {
                                          "type": "object",
                                          "properties": {
                                            "displayName": {
                                              "type": "string",
                                              "value": "By"
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "target": {
                                      "type": "variable",
                                      "value": "BookedVenue",
                                      "class": "namedVariable",
                                      "info": {
                                        "type": "alias"
                                      }
                                    }
                                  }
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "type": {
                                      "type": "variable",
                                      "value": "Relation.HappenTo",
                                      "class": "dictionaryValue",
                                      "info": {
                                        "dictionary": "Relation",
                                        "key": "HappenTo",
                                        "value": {
                                          "type": "object",
                                          "properties": {
                                            "displayName": {
                                              "type": "string",
                                              "value": "Happened to"
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "target": {
                                      "type": "expression",
                                      "operator": "or",
                                      "children": [
                                        {
                                          "type": "variable",
                                          "value": "Wedding",
                                          "class": "namedVariable",
                                          "info": {
                                            "type": "Gathering"
                                          }
                                        },
                                        {
                                          "type": "variable",
                                          "value": "WeddingReception",
                                          "class": "namedVariable",
                                          "info": {
                                            "type": "Gathering"
                                          }
                                        }
                                      ],
                                      "childrenType": "operand"
                                    }
                                  }
                                }
                              ]
                            },
                            "annotations": [
                              {
                                "type": "annotation",
                                "name": "Probability",
                                "properties": {
                                  "p": {
                                    "type": "number",
                                    "value": "0.3"
                                  }
                                }
                              }
                            ]
                          }
                        ],
                        "childrenType": "operand",
                        "annotations": [
                          {
                            "type": "annotation",
                            "name": "Text",
                            "properties": {
                              "value": {
                                "type": "string",
                                "value": " 1. the booked venue for the wedding or wedding reception being unable to hold your wedding and/or wedding reception due to:"
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "operation",
                        "operator": "causal",
                        "children": [
                          {
                            "type": "block",
                            "name": "Situation",
                            "properties": {
                              "event": {
                                "type": "expression",
                                "operator": "or",
                                "children": [
                                  {
                                    "type": "variable",
                                    "value": "Event.Death",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Event",
                                      "key": "Death",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Death"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  {
                                    "type": "variable",
                                    "value": "Event.Injury",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Event",
                                      "key": "Injury",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Injury"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  {
                                    "type": "variable",
                                    "value": "Event.Sickness",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Event",
                                      "key": "Sickness",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Sickness"
                                          }
                                        }
                                      }
                                    }
                                  }
                                ],
                                "childrenType": "operand"
                              },
                              "relation": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "variable",
                                    "value": "Relation.HappenTo",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Relation",
                                      "key": "HappenTo",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Happened to"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "target": {
                                    "type": "expression",
                                    "operator": "or",
                                    "children": [
                                      {
                                        "type": "variable",
                                        "value": "Spouse1",
                                        "class": "namedVariable",
                                        "info": {
                                          "type": "Person"
                                        }
                                      },
                                      {
                                        "type": "variable",
                                        "value": "Spouse2",
                                        "class": "namedVariable",
                                        "info": {
                                          "type": "Person"
                                        }
                                      }
                                    ],
                                    "childrenType": "operand"
                                  }
                                }
                              }
                            },
                            "annotations": [
                              {
                                "type": "annotation",
                                "name": "Probability",
                                "properties": {
                                  "p": {
                                    "type": "number",
                                    "value": "0.00001"
                                  }
                                }
                              }
                            ]
                          },
                          {
                            "type": "block",
                            "name": "Situation",
                            "properties": {
                              "event": {
                                "type": "variable",
                                "value": "Event.InapropriateCircumpstance",
                                "class": "scopeVariable"
                              },
                              "relation": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "variable",
                                    "value": "Relation.HappenTo",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Relation",
                                      "key": "HappenTo",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Happened to"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "target": {
                                    "type": "expression",
                                    "operator": "or",
                                    "children": [
                                      {
                                        "type": "variable",
                                        "value": "Wedding",
                                        "class": "namedVariable",
                                        "info": {
                                          "type": "Gathering"
                                        }
                                      },
                                      {
                                        "type": "variable",
                                        "value": "WeddingReception",
                                        "class": "namedVariable",
                                        "info": {
                                          "type": "Gathering"
                                        }
                                      }
                                    ],
                                    "childrenType": "operand"
                                  }
                                }
                              }
                            },
                            "annotations": [
                              {
                                "type": "annotation",
                                "name": "Probability",
                                "properties": {
                                  "p": {
                                    "type": "number",
                                    "value": "0.0001"
                                  }
                                }
                              }
                            ]
                          }
                        ],
                        "childrenType": "operand",
                        "annotations": [
                          {
                            "type": "annotation",
                            "name": "Text",
                            "properties": {
                              "value": {
                                "type": "string",
                                "value": "  2. the death, injury or sickness of one or both of the couple or their close relative which would make having or continuing with the wedding and/or wedding reception inappropriate;"
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "operation",
                        "operator": "causal",
                        "children": [
                          {
                            "type": "block",
                            "name": "Situation",
                            "properties": {
                              "event": {
                                "type": "variable",
                                "value": "Event.NoShow",
                                "class": "dictionaryValue",
                                "info": {
                                  "dictionary": "Event",
                                  "key": "NoShow",
                                  "value": {
                                    "type": "object",
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "value": "No show"
                                      }
                                    }
                                  }
                                }
                              },
                              "relation": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "variable",
                                    "value": "Relation.CausedBy",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Relation",
                                      "key": "CausedBy",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Caused by"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "target": {
                                    "type": "string",
                                    "value": "booked and paid for professional Wedding Services Supplier"
                                  }
                                }
                              }
                            },
                            "annotations": [
                              {
                                "type": "annotation",
                                "name": "Probability",
                                "properties": {
                                  "p": {
                                    "type": "number",
                                    "value": "0.001"
                                  }
                                }
                              }
                            ]
                          },
                          {
                            "type": "block",
                            "name": "Situation",
                            "properties": {
                              "event": {
                                "type": "expression",
                                "operator": "or",
                                "children": [
                                  {
                                    "type": "variable",
                                    "value": "Event.ImpossibleContinuationOfEvent",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Event",
                                      "key": "ImpossibleContinuationOfEvent",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Impossible Continuation of Event"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  {
                                    "type": "variable",
                                    "value": "Event.ImpossibleHappeningOfEvent",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Event",
                                      "key": "ImpossibleHappeningOfEvent",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Impossible Happening of Event"
                                          }
                                        }
                                      }
                                    }
                                  }
                                ],
                                "childrenType": "operand"
                              },
                              "relation": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "variable",
                                    "value": "Relation.HappenTo",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Relation",
                                      "key": "HappenTo",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Happened to"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "target": {
                                    "type": "expression",
                                    "operator": "or",
                                    "children": [
                                      {
                                        "type": "variable",
                                        "value": "Wedding",
                                        "class": "namedVariable",
                                        "info": {
                                          "type": "Gathering"
                                        }
                                      },
                                      {
                                        "type": "variable",
                                        "value": "WeddingReception",
                                        "class": "namedVariable",
                                        "info": {
                                          "type": "Gathering"
                                        }
                                      }
                                    ],
                                    "childrenType": "operand"
                                  }
                                }
                              }
                            },
                            "annotations": [
                              {
                                "type": "annotation",
                                "name": "Probability",
                                "properties": {
                                  "p": {
                                    "type": "number",
                                    "value": "0.0001"
                                  }
                                }
                              }
                            ]
                          }
                        ],
                        "childrenType": "operand",
                        "annotations": [
                          {
                            "type": "annotation",
                            "name": "Text",
                            "properties": {
                              "value": {
                                "type": "string",
                                "value": "3. the total non-appearance of any booked and paid for professional Wedding Services Supplier which would make having or continuing with the wedding or wedding reception impossible;"
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "operation",
                        "operator": "causal",
                        "children": [
                          {
                            "type": "block",
                            "name": "Situation",
                            "properties": {
                              "event": {
                                "type": "variable",
                                "value": "Event.PolicyPurchase",
                                "class": "dictionaryValue",
                                "info": {
                                  "dictionary": "Event",
                                  "key": "PolicyPurchase",
                                  "value": {
                                    "type": "object",
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "value": "Policy Purchase"
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          {
                            "type": "block",
                            "name": "Time",
                            "properties": {
                              "value": {
                                "type": "number",
                                "value": "16"
                              },
                              "unit": {
                                "type": "string",
                                "value": "Week"
                              }
                            }
                          },
                          {
                            "type": "block",
                            "name": "Situation",
                            "properties": {
                              "event": {
                                "type": "variable",
                                "value": "Event.NotificationOfLossOfJob",
                                "class": "dictionaryValue",
                                "info": {
                                  "dictionary": "Event",
                                  "key": "NotificationOfLossOfJob",
                                  "value": {
                                    "type": "object",
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "value": "Notification of loss of job"
                                      }
                                    }
                                  }
                                }
                              },
                              "relation": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "variable",
                                    "value": "Relation.HappenTo",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Relation",
                                      "key": "HappenTo",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "Happened to"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "target": {
                                    "type": "variable",
                                    "value": "PolicyHolder",
                                    "class": "namedVariable",
                                    "info": {
                                      "type": "alias"
                                    }
                                  }
                                }
                              }
                            },
                            "annotations": [
                              {
                                "type": "annotation",
                                "name": "Probability",
                                "properties": {
                                  "p": {
                                    "type": "number",
                                    "value": "0.00001"
                                  }
                                }
                              }
                            ]
                          }
                        ],
                        "childrenType": "operand",
                        "annotations": [
                          {
                            "type": "annotation",
                            "name": "Text",
                            "properties": {
                              "value": {
                                "type": "string",
                                "value": "4. your redundancy or that of any of your close relatives who have or would have made proven, significant, financial contributions on which the wedding arrangements depend, where notice is received at least 16 weeks after date of purchase of this insurance and which qualifies for payment under redundancy legislation and where there is a clear intention to rearrange the wedding; "
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "block",
                        "name": "Situation",
                        "properties": {
                          "event": {
                            "type": "string",
                            "value": "mobilized"
                          },
                          "relation": {
                            "type": "object",
                            "properties": {
                              "type": {
                                "type": "variable",
                                "value": "Relation.HappenTo",
                                "class": "dictionaryValue",
                                "info": {
                                  "dictionary": "Relation",
                                  "key": "HappenTo",
                                  "value": {
                                    "type": "object",
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "value": "Happened to"
                                      }
                                    }
                                  }
                                }
                              },
                              "target": {
                                "type": "expression",
                                "operator": "or",
                                "children": [
                                  {
                                    "type": "variable",
                                    "value": "Spouse1",
                                    "class": "namedVariable",
                                    "info": {
                                      "type": "Person"
                                    }
                                  },
                                  {
                                    "type": "variable",
                                    "value": "Spouse2",
                                    "class": "namedVariable",
                                    "info": {
                                      "type": "Person"
                                    }
                                  },
                                  {
                                    "type": "string",
                                    "value": "couple close relative"
                                  }
                                ],
                                "childrenType": "operand"
                              }
                            }
                          }
                        },
                        "annotations": [
                          {
                            "type": "annotation",
                            "name": "Text",
                            "properties": {
                              "value": {
                                "type": "string",
                                "value": "5. one of the couple or a close relative being unforeseeably posted overseas or being called on unavoidable and necessary duty where that person is a serving member of the UK armed forces, ambulance or health service, coastguard, fire brigade or police force; "
                              }
                            }
                          },
                          {
                            "type": "annotation",
                            "name": "Probability",
                            "properties": {
                              "p": {
                                "type": "number",
                                "value": "0.00001"
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "block",
                        "name": "Situation",
                        "properties": {
                          "event": {
                            "type": "variable",
                            "value": "Event.NoShow",
                            "class": "dictionaryValue",
                            "info": {
                              "dictionary": "Event",
                              "key": "NoShow",
                              "value": {
                                "type": "object",
                                "properties": {
                                  "displayName": {
                                    "type": "string",
                                    "value": "No show"
                                  }
                                }
                              }
                            }
                          },
                          "relation": {
                            "type": "object",
                            "properties": {
                              "type": {
                                "type": "variable",
                                "value": "Relation.CausedBy",
                                "class": "dictionaryValue",
                                "info": {
                                  "dictionary": "Relation",
                                  "key": "CausedBy",
                                  "value": {
                                    "type": "object",
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "value": "Caused by"
                                      }
                                    }
                                  }
                                }
                              },
                              "target": {
                                "type": "string",
                                "value": "intended officiating minister or registrar"
                              }
                            }
                          }
                        },
                        "annotations": [
                          {
                            "type": "annotation",
                            "name": "Text",
                            "properties": {
                              "value": {
                                "type": "string",
                                "value": "6. the non-appearance of the intended officiating minister or registrar and no substitute can be obtained;"
                              }
                            }
                          },
                          {
                            "type": "annotation",
                            "name": "Probability",
                            "properties": {
                              "p": {
                                "type": "number",
                                "value": "0.00001"
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "operation",
                        "operator": "causal",
                        "children": [
                          {
                            "type": "block",
                            "name": "Situation",
                            "properties": {
                              "event": {
                                "type": "expression",
                                "operator": "or",
                                "children": [
                                  {
                                    "type": "variable",
                                    "value": "Event.AdverseWeather",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Event",
                                      "key": "AdverseWeather",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "adverse weather"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  {
                                    "type": "variable",
                                    "value": "Event.NaturalCatastrophe",
                                    "class": "dictionaryValue",
                                    "info": {
                                      "dictionary": "Event",
                                      "key": "NaturalCatastrophe",
                                      "value": {
                                        "type": "object",
                                        "properties": {
                                          "displayName": {
                                            "type": "string",
                                            "value": "natural catastrophe"
                                          }
                                        }
                                      }
                                    }
                                  }
                                ],
                                "childrenType": "operand"
                              }
                            },
                            "annotations": [
                              {
                                "type": "annotation",
                                "name": "Probability",
                                "properties": {
                                  "p": {
                                    "type": "number",
                                    "value": "0.00001"
                                  }
                                }
                              }
                            ]
                          },
                          {
                            "type": "block",
                            "name": "Situation",
                            "properties": {
                              "event": {
                                "type": "variable",
                                "value": "Event.InabilityToReachPlace",
                                "class": "dictionaryValue",
                                "info": {
                                  "dictionary": "Event",
                                  "key": "InabilityToReachPlace",
                                  "value": {
                                    "type": "object",
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "value": "Inability to reach a place"
                                      }
                                    }
                                  }
                                }
                              },
                              "relation": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "type": {
                                      "type": "variable",
                                      "value": "Relation.HappenTo",
                                      "class": "dictionaryValue",
                                      "info": {
                                        "dictionary": "Relation",
                                        "key": "HappenTo",
                                        "value": {
                                          "type": "object",
                                          "properties": {
                                            "displayName": {
                                              "type": "string",
                                              "value": "Happened to"
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "target": {
                                      "type": "expression",
                                      "operator": "or",
                                      "children": [
                                        {
                                          "type": "variable",
                                          "value": "PolicyHolder",
                                          "class": "namedVariable",
                                          "info": {
                                            "type": "alias"
                                          }
                                        },
                                        {
                                          "type": "string",
                                          "value": "more than 50% of Wedding.guests.count"
                                        }
                                      ],
                                      "childrenType": "operand"
                                    }
                                  }
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "type": {
                                      "type": "variable",
                                      "value": "Relation.HappenAt",
                                      "class": "dictionaryValue",
                                      "info": {
                                        "dictionary": "Relation",
                                        "key": "HappenAt",
                                        "value": {
                                          "type": "object",
                                          "properties": {
                                            "displayName": {
                                              "type": "string",
                                              "value": "Happened At"
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "target": {
                                      "type": "variable",
                                      "value": "BookedVenue",
                                      "class": "namedVariable",
                                      "info": {
                                        "type": "alias"
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        ],
                        "childrenType": "operand",
                        "annotations": [
                          {
                            "type": "annotation",
                            "name": "Text",
                            "properties": {
                              "value": {
                                "type": "string",
                                "value": "7. your inability or that of at least 50% of the guests to reach the wedding or wedding reception venue due to adverse weather conditions or natural  catastrophe;"
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "block",
                        "name": "Situation",
                        "properties": {
                          "event": {
                            "type": "expression",
                            "operator": "or",
                            "children": [
                              {
                                "type": "variable",
                                "value": "Event.Loss",
                                "class": "dictionaryValue",
                                "info": {
                                  "dictionary": "Event",
                                  "key": "Loss",
                                  "value": {
                                    "type": "object",
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "value": "Loss"
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "type": "variable",
                                "value": "Event.Theft",
                                "class": "dictionaryValue",
                                "info": {
                                  "dictionary": "Event",
                                  "key": "Theft",
                                  "value": {
                                    "type": "object",
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "value": "Theft"
                                      }
                                    }
                                  }
                                }
                              }
                            ],
                            "childrenType": "operand"
                          },
                          "relation": {
                            "type": "object",
                            "properties": {
                              "type": {
                                "type": "variable",
                                "value": "Relation.HappenTo",
                                "class": "dictionaryValue",
                                "info": {
                                  "dictionary": "Relation",
                                  "key": "HappenTo",
                                  "value": {
                                    "type": "object",
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "value": "Happened to"
                                      }
                                    }
                                  }
                                }
                              },
                              "target": {
                                "type": "variable",
                                "value": "InsuredMarquee",
                                "class": "namedVariable",
                                "info": {
                                  "type": "PhysicalObject"
                                }
                              }
                            }
                          }
                        },
                        "annotations": [
                          {
                            "type": "annotation",
                            "name": "Text",
                            "properties": {
                              "value": {
                                "type": "string",
                                "value": "8. loss or theft of or severe damage to the marquee (only applies if you have purchased the optional marquee cover)."
                              }
                            }
                          },
                          {
                            "type": "annotation",
                            "name": "Probability",
                            "properties": {
                              "p": {
                                "type": "number",
                                "value": "0.0001"
                              }
                            }
                          }
                        ]
                      }
                    ],
                    "childrenType": "operand"
                  },
                  {
                    "type": "block",
                    "name": "Situation",
                    "properties": {
                      "event": {
                        "type": "variable",
                        "value": "Event.UnavoidableCancellation",
                        "class": "dictionaryValue",
                        "info": {
                          "dictionary": "Event",
                          "key": "UnavoidableCancellation",
                          "value": {
                            "type": "object",
                            "properties": {
                              "displayName": {
                                "type": "string",
                                "value": "Unavoidable cancellation"
                              }
                            }
                          }
                        }
                      },
                      "relation": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "variable",
                              "value": "Relation.HappenTo",
                              "class": "dictionaryValue",
                              "info": {
                                "dictionary": "Relation",
                                "key": "HappenTo",
                                "value": {
                                  "type": "object",
                                  "properties": {
                                    "displayName": {
                                      "type": "string",
                                      "value": "Happened to"
                                    }
                                  }
                                }
                              }
                            },
                            "target": {
                              "type": "expression",
                              "operator": "or",
                              "children": [
                                {
                                  "type": "variable",
                                  "value": "Wedding",
                                  "class": "namedVariable",
                                  "info": {
                                    "type": "Gathering"
                                  }
                                },
                                {
                                  "type": "variable",
                                  "value": "WeddingReception",
                                  "class": "namedVariable",
                                  "info": {
                                    "type": "Gathering"
                                  }
                                }
                              ],
                              "childrenType": "operand"
                            }
                          }
                        },
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "variable",
                              "value": "Relation.CausedBy",
                              "class": "dictionaryValue",
                              "info": {
                                "dictionary": "Relation",
                                "key": "CausedBy",
                                "value": {
                                  "type": "object",
                                  "properties": {
                                    "displayName": {
                                      "type": "string",
                                      "value": "Caused by"
                                    }
                                  }
                                }
                              }
                            },
                            "target": {
                              "type": "variable",
                              "value": "PolicyHolder",
                              "class": "namedVariable",
                              "info": {
                                "type": "alias"
                              }
                            }
                          }
                        }
                      ]
                    }
                  },
                  {
                    "type": "block",
                    "name": "Situation",
                    "properties": {
                      "event": {
                        "type": "variable",
                        "value": "Event.IntentionToReplan",
                        "class": "dictionaryValue",
                        "info": {
                          "dictionary": "Event",
                          "key": "IntentionToReplan",
                          "value": {
                            "type": "object",
                            "properties": {
                              "displayName": {
                                "type": "string",
                                "value": "Clear intention to replan"
                              }
                            }
                          }
                        }
                      },
                      "relation": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "variable",
                              "value": "Relation.HappenTo",
                              "class": "dictionaryValue",
                              "info": {
                                "dictionary": "Relation",
                                "key": "HappenTo",
                                "value": {
                                  "type": "object",
                                  "properties": {
                                    "displayName": {
                                      "type": "string",
                                      "value": "Happened to"
                                    }
                                  }
                                }
                              }
                            },
                            "target": {
                              "type": "expression",
                              "operator": "or",
                              "children": [
                                {
                                  "type": "variable",
                                  "value": "Wedding",
                                  "class": "namedVariable",
                                  "info": {
                                    "type": "Gathering"
                                  }
                                },
                                {
                                  "type": "variable",
                                  "value": "WeddingReception",
                                  "class": "namedVariable",
                                  "info": {
                                    "type": "Gathering"
                                  }
                                }
                              ],
                              "childrenType": "operand"
                            }
                          }
                        },
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "variable",
                              "value": "Relation.By",
                              "class": "dictionaryValue",
                              "info": {
                                "dictionary": "Relation",
                                "key": "By",
                                "value": {
                                  "type": "object",
                                  "properties": {
                                    "displayName": {
                                      "type": "string",
                                      "value": "By"
                                    }
                                  }
                                }
                              }
                            },
                            "target": {
                              "type": "variable",
                              "value": "PolicyHolder",
                              "class": "namedVariable",
                              "info": {
                                "type": "alias"
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                ],
                "childrenType": "operand"
              }
            ],
            "annotations": [
              {
                "type": "annotation",
                "name": "Text",
                "properties": {
                  "value": {
                    "type": "string",
                    "value": " # Part I  Cancellation\nWe will pay up to the amount shown in the schedule in total for any irrecoverable expenses you have paid for or which you have to pay for, under contract or subsequent agreement for the services of any wedding services supplier not used as a direct result of the unavoidable cancellation by you of the wedding or wedding reception caused by any of the following reasons:"
                  }
                }
              },
              {
                "type": "annotation",
                "name": "Payout",
                "properties": {
                  "type": {
                    "type": "string",
                    "value": "Limit"
                  },
                  "amount": {
                    "type": "variable",
                    "value": "InsuredSum",
                    "class": "namedVariable",
                    "info": {
                      "type": "Amount"
                    }
                  },
                  "unit": {
                    "type": "string",
                    "value": "USD"
                  }
                }
              }
            ]
          }
        },
        "rules": {},
        "declarations": {
          "Event": {
            "class": "Dictionary",
            "name": "Event",
            "properties": {
              "UnavoidableCancellation": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Unavoidable cancellation"
                  }
                }
              },
              "IntentionToReplan": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Clear intention to replan"
                  }
                }
              },
              "Closure": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Closure"
                  }
                }
              },
              "ActOfTerrorism": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Act of terrorism"
                  }
                }
              },
              "Murder": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Murder"
                  }
                }
              },
              "Death": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Death"
                  }
                }
              },
              "Injury": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Injury"
                  }
                }
              },
              "Sickness": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Sickness"
                  }
                }
              },
              "Suicide": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Suicide"
                  }
                }
              },
              "Fire": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Fire"
                  }
                }
              },
              "NaturalCatastrophe": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "natural catastrophe"
                  }
                }
              },
              "AdverseWeather": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "adverse weather"
                  }
                }
              },
              "Damage": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Damage"
                  }
                }
              },
              "FinancialFailure": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "financial failure"
                  }
                }
              },
              "Bankruptcy": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "bankruptcy"
                  }
                }
              },
              "Liquidation": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "liquidation"
                  }
                }
              },
              "Administration": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "administration"
                  }
                }
              },
              "UnableToHoldGathering": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "unable to hold gathering"
                  }
                }
              },
              "InappropriateCircumstance": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Inappropriate Circumstance"
                  }
                }
              },
              "NoShow": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "No show"
                  }
                }
              },
              "ImpossibleContinuationOfEvent": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Impossible Continuation of Event"
                  }
                }
              },
              "ImpossibleHappeningOfEvent": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Impossible Happening of Event"
                  }
                }
              },
              "PolicyPurchase": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Policy Purchase"
                  }
                }
              },
              "NotificationOfLossOfJob": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Notification of loss of job"
                  }
                }
              },
              "Loss": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Loss"
                  }
                }
              },
              "Theft": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Theft"
                  }
                }
              },
              "InabilityToReachPlace": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Inability to reach a place"
                  }
                }
              }
            }
          },
          "Relation": {
            "class": "Dictionary",
            "name": "Relation",
            "properties": {
              "HappenTo": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Happened to"
                  }
                }
              },
              "HappenAt": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Happened At"
                  }
                }
              },
              "CausedBy": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "Caused by"
                  }
                }
              },
              "By": {
                "type": "object",
                "properties": {
                  "displayName": {
                    "type": "string",
                    "value": "By"
                  }
                }
              }
            }
          },
          "Situation": {
            "class": "class",
            "name": "Situation",
            "properties": {
              "event": {
                "type": "object",
                "properties": {
                  "ask": {
                    "type": "object",
                    "properties": {
                      "en": {
                        "type": "string",
                        "value": "What happened?"
                      }
                    }
                  },
                  "dictionary": {
                    "type": "variable",
                    "value": "Event"
                  },
                  "type": {
                    "type": "variable",
                    "value": "Enum"
                  }
                }
              },
              "location": {
                "type": "object",
                "properties": {
                  "ask": {
                    "type": "object",
                    "properties": {
                      "en": {
                        "type": "string",
                        "value": "Where did it happen?"
                      }
                    }
                  }
                }
              }
            }
          },
          "Person": {
            "class": "class",
            "name": "Person",
            "properties": false
          },
          "Venue": {
            "class": "class",
            "name": "Venue",
            "properties": false
          },
          "Gathering": {
            "class": "class",
            "name": "Gathering",
            "properties": {
              "venue": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "variable",
                    "value": "Venue"
                  }
                }
              }
            }
          },
          "PhysicalObject": {
            "class": "class",
            "name": "PhysicalObject",
            "properties": false
          },
          "Amount": {
            "class": "class",
            "name": "Amount",
            "properties": false
          },
          "Spouse1": {
            "class": "Person",
            "name": "Spouse1"
          },
          "Spouse2": {
            "class": "Person",
            "name": "Spouse2"
          },
          "PolicyHolder": {
            "class": "alias",
            "name": "PolicyHolder",
            "properties": {
              "is": [
                {
                  "type": "variable",
                  "value": "Spouse1"
                },
                {
                  "type": "variable",
                  "value": "Spouse2"
                }
              ]
            }
          },
          "Wedding": {
            "class": "Gathering",
            "name": "Wedding"
          },
          "WeddingReception": {
            "class": "Gathering",
            "name": "WeddingReception"
          },
          "BookedVenue": {
            "class": "alias",
            "name": "BookedVenue",
            "properties": {
              "is": [
                {
                  "type": "variable",
                  "value": "Wedding.venue"
                },
                {
                  "type": "variable",
                  "value": "WeddingReception.venue"
                }
              ]
            }
          },
          "InsuredMarquee": {
            "class": "PhysicalObject",
            "name": "InsuredMarquee"
          },
          "InsuredSum": {
            "class": "Amount",
            "name": "InsuredSum"
          }
        }
      }
      

    </textarea>
    <input type="button" onclick="render()" value="Debug a new product"/>

    <div id='theater'>


    </div>
    
    
    <script>
      let theater = document.getElementById('theater');

      function render() {
        let data = JSON.parse(jsonIn.value);
        console.log(data);
        theater.innerHTML = "";
   //     renderDeclarations(data);

        renderChains(data);
      }
      render();

      function renderChains(data) {
        for (let chainName in data.chains) {
          let chain = data.chains[chainName];
          chain.name = chainName;
          let div = renderAChain(chain);
          div.className = "chain";
          div.prepend(renderTitle(`Chain: ${chain.name}`));
          theater.appendChild(div);
        }
      }

      function renderAChain(node) {
        let div = document.createElement("div");
      

        if (node.annotations) {
          for (let annotation of node.annotations) {
            div.appendChild(renderAnnotation(annotation));
          }
        }

   
        
        if (node.type == "chain") {
          node.className = "block rule"
          for (let item of node.children) {
            div.appendChild(renderAChain(item));
          }
        }

        if (node.type == "any") {
          div.appendChild(renderAny());
        }

        else if (node.type == "operation" && node.operator == "causal") {
          div.className = "block causal";
          let firstFlag = true;
          for (let item of node.children) {
            if (!firstFlag) {
              div.appendChild(renderLeadTo());
            }
            div.appendChild(renderAChain(item));
            firstFlag = false;
          }
        }

        else if (node.type == "operation" && node.operator == "or") {
          div.className = "block or";
          let firstFlag = true;
          for (let item of node.children) {
            if (!firstFlag) {
              div.appendChild(renderOR());
            }
            div.appendChild(renderAChain(item));
            firstFlag = false;
          }
        }
        else if (node.type == "logic_block") {

          node.className = "block"
          if (node.children.length) {
            for (let item of node.children) {
             div.appendChild(renderAChain(item));
            }
          }
          else {
            div.appendChild(renderAChain(node.children));
          }
        
        }
        else if (node.type == "block") {
          div.appendChild(renderBlock(node))
        }
        else {
          // unsuported so debug
          console.log(node, node.type);
        }
      

        return div;
      }

      function renderItemHTML(item) {
        let html = "";
        if (Array.isArray(item)) {
            html =  renderArrayPropertyHTML(item);
          }
          else if (item.type == "object") {
            html = renderPropertyObjHTML(item);
          }
          else if (item.type == "expression") {
            html = renderExpressionPropertyHTML(item);;
          }
          else {
            html = `<div class='fullWidth'> ${renderValueHTML(item)} </div>`;
          }
        return html;
      }

      function renderValueHTML(item) {
        console.log(item);
        if (item.type == "variable") {
          return renderVariableHTML(item);
        } 
        else if (item.type == "string") {
          return `"${item.value}"`;
        }
        else if (item.type == "number") {
          return item.value;
        }
        else if (item == "infinity") {
          return "&infin;";
        }
        else if (item == "negativeInfinity") {
          return "-&infin;";
        }
        else if (item.type == "range") {
          return `[
            ${(item.strictBoundFrom)? "=": ""}
            ${renderValueHTML(item.from)}
            ...
            ${renderValueHTML(item.to)}
            ${(item.strictBoundTo)? "=": ""}
          ]`
        }
        return item.value;
      }

      function renderVariableHTML(item) {

        if (item.class == 'dictionaryValue') {
          return `<span class='variable'>
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 459.319 459.319" style="enable-background:new 0 0 459.319 459.319;" xml:space="preserve">
              <g color="#888">	<path d="M141.288,189.821h-23.685V145.28h23.528v-23.69h21.016v23.374h23.681v44.707h-23.681v0.151H141.288z M60.801,398.87   c0.012,1.1,0.03,1.921,0.042,2.459c0.006,0.331-0.053,0.638-0.071,0.963c0.739,18.224,15.755,32.817,34.146,32.817h303.76v-33.461   c0-6.68,5.421-12.105,12.105-12.105c6.679,0,12.105,5.426,12.105,12.105v45.565c0,6.686-5.427,12.105-12.105,12.105H93.091   c-0.629,0-1.235-0.089-1.847-0.183c-30.505-1.91-54.757-27.261-54.757-58.245c0-0.71,0.085-1.396,0.109-2.099   c-0.375-35.943,0-309.36,0.042-339.109c-0.047-0.423-0.127-0.827-0.127-1.259C36.511,26.205,62.719,0,94.938,0h19.343h293.535   h2.955c6.685,0,12.105,5.423,12.105,12.105v342.139c0,6.679-5.421,12.104-12.105,12.104c-0.071,0-0.13-0.023-0.201-0.023   c-0.887,0.213-1.82,0.354-2.772,0.354H94.918C76.736,366.674,61.859,380.948,60.801,398.87z M278.347,121.59h94.425v20.862h-23.685   v23.69h-23.525v23.685h-23.69v23.533h-23.536v49.882h120.792v-26.209h-94.584v-20.859h23.69V192.49h23.525v-23.69h23.689V145.28   h23.679V95.237h-120.78V121.59z M224.949,192.49h56.265v-26.353h-56.265V192.49z M91.41,263.229h26.2v-47.056h23.679v-0.15h44.54   v47.219h26.354v-120.79h-23.688v-23.841H164.81V95.237h-26.202v23.684h-23.685v23.69H91.389v120.618H91.41z"/></g>
            </svg>
              ${item.value}
            </span>`
        }

        if (item.class == 'namedVariable') {
          return `<span class='variable'>
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 482.8 482.8" style="enable-background:new 0 0 482.8 482.8;" xml:space="preserve">
              <g color="#888">
                <path d="M255.2,209.3c-5.3,5.3-5.3,13.8,0,19.1c21.9,21.9,21.9,57.5,0,79.4l-115,115c-21.9,21.9-57.5,21.9-79.4,0l-17.3-17.3    c-21.9-21.9-21.9-57.5,0-79.4l115-115c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-115,115C8.7,322.7,0,343.6,0,365.8    c0,22.2,8.6,43.1,24.4,58.8l17.3,17.3c16.2,16.2,37.5,24.3,58.8,24.3s42.6-8.1,58.8-24.3l115-115c32.4-32.4,32.4-85.2,0-117.6    C269.1,204,260.5,204,255.2,209.3z"/>
                <path d="M458.5,58.2l-17.3-17.3c-32.4-32.4-85.2-32.4-117.6,0l-115,115c-32.4,32.4-32.4,85.2,0,117.6c5.3,5.3,13.8,5.3,19.1,0    s5.3-13.8,0-19.1c-21.9-21.9-21.9-57.5,0-79.4l115-115c21.9-21.9,57.5-21.9,79.4,0l17.3,17.3c21.9,21.9,21.9,57.5,0,79.4l-115,115    c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4l115-115c15.7-15.7,24.4-36.6,24.4-58.8    C482.8,94.8,474.2,73.9,458.5,58.2z"/>
              </g>
            </svg>
            ${item.value}
            </span>`
        }


        return `<span class='variable'>${item.value}</span>`
      }

      function renderExpressionPropertyHTML(expression) {
        let html = "<div class='arrayProperty expression'>";

        let isFirst = true;
        for (let item of expression.children) {
          if (!isFirst) {
            html += `<div class='expressionOperator'>${expression.operator || "or"}</div>`;
          }
          html += renderItemHTML(item);
        
          isFirst  = false;
        }

        html += "</div>";
        return html;
      }
      function renderArrayPropertyHTML(list) {
        let html = "<div class='arrayProperty'>";
        
        let isFirst = true;

        for (let item of list) {
          if (!isFirst) {
            html += `<div class='expressionOperator'>and</div>`;
          }
          html +=renderItemHTML(item);
          isFirst = false;
        }

        html += "</div>";
        return html;
      }
      function renderPropertyObjHTML(obj, className='objProperty') {
        let html = `<div class='${className}'>`;

        for (let key in obj.properties) {
          if (Array.isArray(obj.properties[key])) {
            html +=  `<div class='fullWidth'> <div class='fullWidth'> ${key} : </div> ${renderArrayPropertyHTML(obj.properties[key])} </div>`
          }
          else if (obj.properties[key].type == "object") {
            html += `<div class='fullWidth'> ${key}: ${renderPropertyObjHTML(obj.properties[key])} </div>`
          }
          else if (obj.properties[key].type == "expression") {
            console.log(obj.properties[key]);
            html +=  `<div class='fullWidth'> <div class='fullWidth'> ${key} : </div> ${renderExpressionPropertyHTML(obj.properties[key])} </div>`
          }
          else {
            html += 
            `<div class='fullWidth'> ${key}: ${renderValueHTML(obj.properties[key])} </div>`
          }
         
        }     

        html += "</div>";
        return html;
      }

 

      function renderBlock(node) {
        let div = document.createElement('div');
        div.className = 'block final';
          div.innerHTML = `
            <div class='finalTitle'> ${node.name} </div>   
          `;
          div.innerHTML += renderPropertyObjHTML(node, "noborder");
         
        return div;
      }

      function renderLeadTo() {
        let div = document.createElement('div');
        div.className = 'leadTo';
        div.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path d="M24 12l-12-9v5h-12v8h12v5l12-9z"/>
          </svg>`;

        return div;
      }

      function renderOR() {
        let div = document.createElement('div');
        div.className = 'orSymbol';
        div.innerHTML = "OR";

        return div;
      }

      function renderAny() {
        let div = document.createElement('div');
        div.className = 'any';
        div.innerHTML = "*";

        return div;
      }

      function renderTitle(txt) {
        let div = document.createElement('div');
        div.className = 'title';
        div.innerHTML = txt;
        return div;
      }

      function renderAnnotation(annotation) {
        let div = document.createElement('div');
       

        if (annotation.name == "Text") {
          div.className = 'textAnnotation';
          div.innerHTML = markdown(annotation.properties.value.value);
        }
        else {
          div.className = `block annotation annotation${annotation.name}`;
          div.innerHTML = `
          <div>${annotation.name}</div>`;
          for (let key in annotation.properties) {
            div.innerHTML += `<div> ${key}: ${renderValueHTML(annotation.properties[key])}`;
          }      
        }
       

        return div;
      }

      function renderDeclarations(data) {
        for (let declaration in data.declarations) {
          renderDeclaration(data.declarations[declaration]);
        } 
      }

      function renderDeclaration(declaration) {

        let div = document.createElement('div');
        //div.id = ;
        div.className = "block declaration";
        div.innerHTML = `
          <div> Type: ${declaration.class}</div>
          <div> Name: ${declaration.name}</div>
        `;
        theater.appendChild(div);

      }



//lib

      /**
 * drawdown.js
 * (c) Adam Leggett
 */


;function markdown(src) {

var rx_lt = /</g;
var rx_gt = />/g;
var rx_space = /\t|\r|\uf8ff/g;
var rx_escape = /\\([\\\|`*_{}\[\]()#+\-~])/g;
var rx_hr = /^([*\-=_] *){3,}$/gm;
var rx_blockquote = /\n *&gt; *([^]*?)(?=(\n|$){2})/g;
var rx_list = /\n( *)(?:[*\-+]|((\d+)|([a-z])|[A-Z])[.)]) +([^]*?)(?=(\n|$){2})/g;
var rx_listjoin = /<\/(ol|ul)>\n\n<\1>/g;
var rx_highlight = /(^|[^A-Za-z\d\\])(([*_])|(~)|(\^)|(--)|(\+\+)|`)(\2?)([^<]*?)\2\8(?!\2)(?=\W|_|$)/g;
var rx_code = /\n((```|~~~).*\n?([^]*?)\n?\2|((    .*?\n)+))/g;
var rx_link = /((!?)\[(.*?)\]\((.*?)( ".*")?\)|\\([\\`*_{}\[\]()#+\-.!~]))/g;
var rx_table = /\n(( *\|.*?\| *\n)+)/g;
var rx_thead = /^.*\n( *\|( *\:?-+\:?-+\:? *\|)* *\n|)/;
var rx_row = /.*\n/g;
var rx_cell = /\||(.*?[^\\])\|/g;
var rx_heading = /(?=^|>|\n)([>\s]*?)(#{1,6}) (.*?)( #*)? *(?=\n|$)/g;
var rx_para = /(?=^|>|\n)\s*\n+([^<]+?)\n+\s*(?=\n|<|$)/g;
var rx_stash = /-\d+\uf8ff/g;

function replace(rex, fn) {
    src = src.replace(rex, fn);
}

function element(tag, content) {
    return '<' + tag + '>' + content + '</' + tag + '>';
}

function blockquote(src) {
    return src.replace(rx_blockquote, function(all, content) {
        return element('blockquote', blockquote(highlight(content.replace(/^ *&gt; */gm, ''))));
    });
}

function list(src) {
    return src.replace(rx_list, function(all, ind, ol, num, low, content) {
        var entry = element('li', highlight(content.split(
            RegExp('\n ?' + ind + '(?:(?:\\d+|[a-zA-Z])[.)]|[*\\-+]) +', 'g')).map(list).join('</li><li>')));

        return '\n' + (ol
            ? '<ol start="' + (num
                ? ol + '">'
                : parseInt(ol,36) - 9 + '" style="list-style-type:' + (low ? 'low' : 'upp') + 'er-alpha">') + entry + '</ol>'
            : element('ul', entry));
    });
}

function highlight(src) {
    return src.replace(rx_highlight, function(all, _, p1, emp, sub, sup, small, big, p2, content) {
        return _ + element(
              emp ? (p2 ? 'strong' : 'em')
            : sub ? (p2 ? 's' : 'sub')
            : sup ? 'sup'
            : small ? 'small'
            : big ? 'big'
            : 'code',
            highlight(content));
    });
}

function unesc(str) {
    return str.replace(rx_escape, '$1');
}

var stash = [];
var si = 0;

src = '\n' + src + '\n';

replace(rx_lt, '&lt;');
replace(rx_gt, '&gt;');
replace(rx_space, '  ');

// blockquote
src = blockquote(src);

// horizontal rule
replace(rx_hr, '<hr/>');

// list
src = list(src);
replace(rx_listjoin, '');

// code
replace(rx_code, function(all, p1, p2, p3, p4) {
    stash[--si] = element('pre', element('code', p3||p4.replace(/^    /gm, '')));
    return si + '\uf8ff';
});

// link or image
replace(rx_link, function(all, p1, p2, p3, p4, p5, p6) {
    stash[--si] = p4
        ? p2
            ? '<img src="' + p4 + '" alt="' + p3 + '"/>'
            : '<a href="' + p4 + '">' + unesc(highlight(p3)) + '</a>'
        : p6;
    return si + '\uf8ff';
});

// table
replace(rx_table, function(all, table) {
    var sep = table.match(rx_thead)[1];
    return '\n' + element('table',
        table.replace(rx_row, function(row, ri) {
            return row == sep ? '' : element('tr', row.replace(rx_cell, function(all, cell, ci) {
                return ci ? element(sep && !ri ? 'th' : 'td', unesc(highlight(cell || ''))) : ''
            }))
        })
    )
});

// heading
replace(rx_heading, function(all, _, p1, p2) { return _ + element('h' + p1.length, unesc(highlight(p2))) });

// paragraph
replace(rx_para, function(all, content) { return element('p', unesc(highlight(content))) });

// stash
replace(rx_stash, function(all) { return stash[parseInt(all)] });

return src.trim();
};
    </script>




  </body>


</html>